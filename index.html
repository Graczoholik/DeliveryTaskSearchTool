<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Wyszukiwarka by Graczu ‚Äì Tibia</title>
  <style>
    body {
    font-family: 'Trebuchet MS', Arial, sans-serif;
    background:
      url('https://static.tibia.com/images/global/header/background-artwork.jpg') center top no-repeat,
      url('https://www.transparenttextures.com/patterns/parchment.png'),
      #1b1a16;
    background-size: cover, auto, auto;
    background-attachment: fixed;
    color:#eee;
    padding:20px;
  }
    input { width:100%; padding:12px; font-size:16px; margin-bottom:20px; }
    .item { border:1px solid #333; padding:12px; margin-bottom:10px; border-radius:6px; }
    .name { font-size:18px; font-weight:bold; color:#7dd3fc; }
    .meta { font-size:14px; color:#ccc; }
  </style>
</head>
<body>

<h1>üó°Ô∏è Wyszukiwarka by Graczu üõ°Ô∏è</h1>
<input type="text" id="search" placeholder="Wpisz nazwƒô przedmiotu..." />

<div id="results"></div>
<<footer style="margin-top:40px; text-align:center; color:#999; font-size:13px;">
  ‚öîÔ∏è Powered by <strong>El Quattro</strong> ‚Ä¢ Tibia RPG Vibes ‚öîÔ∏è
</footer>

<script>
// === DANE ≈Çadowane z items.json ===
let items = [];

fetch('items.json')
  .then(res => res.json())
  .then(data => {
    items = data;
    
  })
  .catch(err => {
    resultsDiv.innerHTML = '<p>B≈ÇƒÖd ≈Çadowania items.json</p>';
    console.error(err);
  });

const searchInput = document.getElementById('search');
const resultsDiv = document.getElementById('results');

function renderResults(filtered) {
  resultsDiv.innerHTML = '';
  if (filtered.length === 0) {
    resultsDiv.innerHTML = '<p>Brak wynik√≥w</p>';
    return;
  }

  // grupowanie po kategorii
  const grouped = {};
  filtered.forEach(item => {
    if (!grouped[item.category]) grouped[item.category] = [];
    grouped[item.category].push(item);
  });

  Object.keys(grouped).sort().forEach(category => {
    const h = document.createElement('h2');
    h.textContent = category;
    h.style.marginTop = '30px';
    resultsDiv.appendChild(h);

    grouped[category]
      .sort((a, b) => a.name.localeCompare(b.name))
      .forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <div class="name">${item.name}</div>
          <div class="meta">Waga: ${item.weight}</div>
          <div class="meta">Drop: ${item.dropsFrom}</div>
          <div class="meta">Opis: ${item.description}</div>
        `;
        resultsDiv.appendChild(div);
      });
  });
}

  filtered.forEach(item => {
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div class="name">${item.name}</div>
      <div class="meta">Kategoria: ${item.category}</div>
      <div class="meta">Waga: ${item.weight}</div>
      <div class="meta">Drop: ${item.dropsFrom}</div>
      <div class="meta">Opis: ${item.description}</div>
    `;
    resultsDiv.appendChild(div);
  });
}

searchInput.addEventListener('input', () => {
  const q = searchInput.value.toLowerCase();
  const filtered = items.filter(i =>
    i.name.toLowerCase().includes(q)
  );
  renderResults(filtered);
});

renderResults(items);
</script>

</body>
</html>
