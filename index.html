<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Wyszukiwarka by Graczu ‚Äì Tibia</title>
  <style>
    body {
    font-family: 'Trebuchet MS', Arial, sans-serif;
    min-height: 100vh;
    margin: 0;
    padding: 20px;
    color: #3b2f1c;
    background:
      linear-gradient(rgba(255,255,240,0.92), rgba(255,255,240,0.92)),
      repeating-linear-gradient(
        45deg,
        #e6d8b5,
        #e6d8b5 10px,
        #eadfc2 10px,
        #eadfc2 20px
      );
  }
    input {
    width: 100%;
    padding: 14px;
    font-size: 16px;
    margin-bottom: 20px;
    border-radius: 6px;
    border: 1px solid #b89b5e;
    background: #fffaf0;
  }
    .item {
    background: #fffaf0;
    border: 1px solid #c9b27c;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 6px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.15);
  }
    .name { font-size:18px; font-weight:bold; color:#7dd3fc; }
    .meta { font-size:14px; color:#ccc; }
  </style>
</head>
<body>

<h1>üó°Ô∏è Wyszukiwarka by Graczu üõ°Ô∏è</h1>
<div style="max-width:600px; margin-bottom:20px; display:flex; gap:8px;">
  <input type="text" id="search" placeholder="Wpisz nazwƒô przedmiotu..." style="flex:1" />
  <button id="btnSearch" style="padding:14px 18px; border-radius:6px; border:1px solid #b89b5e; background:#e6d8b5; cursor:pointer;">Search</button>
</div>

<div id="results"></div>
<<footer style="margin-top:40px; text-align:center; color:#999; font-size:13px;">
  ‚öîÔ∏è Powered by <strong>El Quattro</strong> ‚Ä¢ Tibia RPG Vibes ‚öîÔ∏è
</footer>

<script>
// === DANE ≈Çadowane z items.json ===
let items = [];

fetch('items.json')
  .then(res => res.json())
  .then(data => {
    const raw = Array.isArray(data) ? data : (data.items || []);
    items = raw.map(i => ({
      name: (i.name || i.Name || '').toString(),
      category: i.category || i.Category || 'Inne',
      weight: i.weight || i.Weight || '-',
      dropsFrom: i.dropsFrom || i.Drop || '-',
      description: i.description || i.Description || ''
    })).filter(i => i.name.length > 0);
    renderResults(items);
  })
  .catch(err => {
    resultsDiv.innerHTML = '<p>B≈ÇƒÖd ≈Çadowania items.json</p>';
    console.error(err);
  });

const searchInput = document.getElementById('search');
const resultsDiv = document.getElementById('results');

function renderResults(filtered) {
  resultsDiv.innerHTML = '';
  if (filtered.length === 0) {
    resultsDiv.innerHTML = '<p>Brak wynik√≥w</p>';
    return;
  }

  // grupowanie po kategorii
  const grouped = {};
  filtered.forEach(item => {
    if (!grouped[item.category]) grouped[item.category] = [];
    grouped[item.category].push(item);
  });

  Object.keys(grouped).sort().forEach(category => {
    const h = document.createElement('h2');
    h.textContent = category;
    h.style.marginTop = '30px';
    resultsDiv.appendChild(h);

    grouped[category]
      .sort((a, b) => a.name.localeCompare(b.name))
      .forEach(item => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `
          <div class="name">${item.name}</div>
          <div class="meta">Waga: ${item.weight}</div>
          <div class="meta">Drop: ${item.dropsFrom}</div>
          <div class="meta">Opis: ${item.description}</div>
        `;
        resultsDiv.appendChild(div);
      });
  });
}

  filtered.forEach(item => {
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div class="name">${item.name}</div>
      <div class="meta">Kategoria: ${item.category}</div>
      <div class="meta">Waga: ${item.weight}</div>
      <div class="meta">Drop: ${item.dropsFrom}</div>
      <div class="meta">Opis: ${item.description}</div>
    `;
    resultsDiv.appendChild(div);
  });
}

document.getElementById('btnSearch').addEventListener('click', runSearch);
searchInput.addEventListener('input', runSearch);
searchInput.addEventListener('keydown', e => {
  if (e.key === 'Enter') runSearch();
});

function runSearch() {
  const q = searchInput.value.toLowerCase().trim();
  if (!q) {
    renderResults(items);
    return;
  }
  const filtered = items.filter(i =>
    i.name.toLowerCase().includes(q)
  );
  renderResults(filtered);
}
  const filtered = items.filter(i =>
    i.name.toLowerCase().includes(q)
  );
  renderResults(filtered);
});

renderResults(items);
</script>

</body>
</html>
